# Viral News to AI Avatar Videos

Automatically research trending news, generate scripts, create AI avatar videos, and post to 9 social platforms.

**Generated by ShipFlow** from n8n workflow.

## Features

- **AI Research** - Perplexity AI finds trending news in your industry
- **Script Writing** - OpenAI writes viral video scripts
- **Avatar Videos** - HeyGen creates AI talking head videos
- **Multi-Platform** - Blotato posts to TikTok, Instagram, YouTube, LinkedIn, Twitter, Facebook, Threads, Bluesky, Pinterest

## Quick Start

### Prerequisites

- Docker and Docker Compose
- API keys for:
  - Perplexity AI
  - OpenAI
  - HeyGen (paid API plan)
  - Blotato

### Setup

1. **Clone/download this folder**

2. **Configure environment variables:**
   ```bash
   cd backend
   cp .env.example .env
   ```
   Edit `.env` with your API keys.

3. **Start the app:**
   ```bash
   docker-compose up --build
   ```

4. **Open the app:**
   - Frontend: http://localhost:3000
   - Backend API: http://localhost:8000
   - API Docs: http://localhost:8000/docs

## Configuration

### Environment Variables

| Variable | Description | Required |
|----------|-------------|----------|
| `PERPLEXITY_API_KEY` | Perplexity AI API key | Yes |
| `OPENAI_API_KEY` | OpenAI API key | Yes |
| `HEYGEN_API_KEY` | HeyGen API key | Yes |
| `HEYGEN_AVATAR_ID` | Your HeyGen avatar ID | Yes |
| `HEYGEN_VOICE_ID` | Your HeyGen voice ID | Yes |
| `BLOTATO_API_KEY` | Blotato API key | Yes |
| `INDUSTRY` | Default industry to research | No (default: real estate) |
| `HEYGEN_HAS_BACKGROUND` | Use background video | No (default: false) |
| `HEYGEN_BACKGROUND_VIDEO_URL` | Background video URL | No |

### Getting API Keys

| Service | Where to Get |
|---------|--------------|
| Perplexity | https://www.perplexity.ai/account/api/keys |
| OpenAI | https://platform.openai.com/api-keys |
| HeyGen | https://www.heygen.com/api-pricing (requires paid plan) |
| Blotato | https://blotato.com > Settings > API |

## Development

### Backend (Python/FastAPI)

```bash
cd backend
python -m venv venv
source venv/bin/activate  # or `venv\Scripts\activate` on Windows
pip install -r requirements.txt
cp .env.example .env
# Edit .env with your credentials
uvicorn app:app --reload
```

### Frontend (Next.js)

```bash
cd frontend
npm install
npm run dev
```

## API Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/` | GET | Health check |
| `/config` | GET | Check which APIs are configured |
| `/workflow/run` | POST | Run the full workflow |
| `/research` | POST | Just research news |
| `/write-script` | POST | Just write a script |
| `/create-video` | POST | Just create a HeyGen video |
| `/video-status/{id}` | GET | Check video generation status |

### Example: Run Full Workflow

```bash
curl -X POST http://localhost:8000/workflow/run \
  -H "Content-Type: application/json" \
  -d '{
    "industry": "real estate",
    "script_length_seconds": 30,
    "platforms": ["tiktok", "instagram", "youtube"]
  }'
```

## Deployment

### Vercel (Frontend)

1. Push to GitHub
2. Connect repo to Vercel
3. Set `NEXT_PUBLIC_API_URL` to your backend URL

### Railway/Render (Backend)

1. Create new project
2. Connect GitHub repo
3. Set root directory to `backend`
4. Add all environment variables

### Your Own Server

```bash
docker-compose up -d
```

## Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                        Frontend                              │
│                    (Next.js + React)                        │
│                   http://localhost:3000                      │
└─────────────────────────┬───────────────────────────────────┘
                          │ HTTP
                          ▼
┌─────────────────────────────────────────────────────────────┐
│                        Backend                               │
│                  (Python + FastAPI)                          │
│                   http://localhost:8000                      │
│                                                              │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │
│  │Perplexity│  │ OpenAI  │  │ HeyGen  │  │ Blotato │        │
│  │   API   │  │   API   │  │   API   │  │   API   │        │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘        │
└─────────────────────────────────────────────────────────────┘
```

## Workflow Steps

1. **Research** - Perplexity finds top 10 trending news
2. **Select** - Perplexity picks most viral story and writes report
3. **Write** - OpenAI writes 30-second script, caption, and title
4. **Create Video** - HeyGen generates AI avatar video
5. **Wait** - Poll until video is ready
6. **Upload** - Upload video to Blotato
7. **Post** - Publish to selected social platforms

## Original n8n Workflow

This app was converted from: `4 Viral News to AI Avatar Videos`

- **Original nodes:** 28 (15 functional, 13 sticky notes)
- **Converted to Python:** 14/15 nodes (93%)
- **Manual setup needed:** Blotato account IDs

See [MANUAL_STEPS.md](./MANUAL_STEPS.md) for completion guide.

## Troubleshooting

### "API key not configured"

Check your `.env` file has all required keys.

### "HeyGen video failed"

- Ensure you have a paid HeyGen API plan
- Check avatar ID is correct (not group ID)
- Try shorter script for testing

### "Blotato post failed"

- Check account IDs are configured
- Verify Blotato API key is valid
- Check platform-specific requirements in Blotato docs

## License

Generated by ShipFlow. You own this code - use it however you want.
